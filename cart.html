<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Coș - Tehnică IT</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">

<header class="bg-blue-800 text-white p-4 text-center font-bold">Coșul tău</header>

<main class="flex-grow container mx-auto py-12">
  <div id="cart-container" class="grid gap-6"></div>
  <div class="text-right mt-6">
    <span class="text-xl font-bold">Total: MDL <span id="cart-total">0</span></span>
  </div>
</main>

<footer class="bg-gray-900 text-gray-300 py-6 text-center">© 2025 Tehnică IT</footer>

<script>
const currentUser = JSON.parse(localStorage.getItem("currentUser"));
const cartContainer = document.getElementById("cart-container");
const cartTotal = document.getElementById("cart-total");

if(!currentUser){
  cartContainer.innerHTML = '<p class="text-center text-red-500">Trebuie să fii logat pentru a vedea coșul!</p>';
} else {
  let cart = currentUser.cart || [];
  function renderCart(){
    cartContainer.innerHTML = "";
    let total = 0;
    cart.forEach(item=>{
      total += item.price * item.quantity;
      const div = document.createElement("div");
      div.className="bg-white p-4 rounded-xl shadow flex justify-between items-center";
      div.innerHTML=`
        <div>
          <h3 class="font-bold">${item.name}</h3>
          <p>MDL ${item.price} x ${item.quantity}</p>
        </div>
        <div>
          <button class="remove-btn bg-red-500 px-3 py-1 text-white rounded">Șterge</button>
        </div>
      `;
      div.querySelector(".remove-btn").addEventListener("click", ()=>{
        cart = cart.filter(i=>i.id!==item.id);
        currentUser.cart = cart;
        localStorage.setItem("currentUser", JSON.stringify(currentUser));
        renderCart();
      });
      cartContainer.appendChild(div);
    });
    cartTotal.textContent = total;
  }
  renderCart();
}
</script>

</body>
</html>
