<!DOCTYPE html>
<html lang="ro" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - TechZone</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans min-h-screen flex flex-col">

  <!-- Header -->
  <header class="bg-gradient-to-r from-indigo-600 to-blue-500 dark:from-gray-800 dark:to-gray-900 text-white shadow-lg sticky top-0 z-50 p-4 flex justify-between items-center">
    <h1 class="text-2xl font-bold text-yellow-400">Admin Panel</h1>
    <button id="admin-logout" class="px-3 py-1 bg-red-500 rounded-lg hover:bg-red-400 transition">Logout</button>
  </header>

  <main class="flex-1 max-w-5xl mx-auto px-6 py-10">

    <h2 class="text-3xl font-bold mb-6 text-center text-yellow-400">Gestionare Produse</h2>

    <!-- Form Add Product -->
    <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md mb-10">
      <h3 class="text-xl font-bold mb-4">Adaugă Produs</h3>
      <form id="add-product-form" class="space-y-4">
        <input type="text" id="product-name" placeholder="Nume produs" required class="w-full p-3 rounded-lg border dark:bg-gray-700 dark:text-white">
        <input type="number" id="product-price" placeholder="Preț (€)" required class="w-full p-3 rounded-lg border dark:bg-gray-700 dark:text-white">
        <input type="text" id="product-image" placeholder="URL imagine" required class="w-full p-3 rounded-lg border dark:bg-gray-700 dark:text-white">
        <button type="submit" class="px-6 py-3 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-300 transition">Adaugă produs</button>
      </form>
    </div>

    <!-- Lista Produse -->
    <div id="admin-products" class="space-y-4"></div>

  </main>

  <script>
    // Restricționare acces admin
    if (localStorage.getItem('isAdmin') !== 'true') {
      alert("Nu ai acces la această pagină!");
      window.location.href = 'admin-login.html';
    }

    const addForm = document.getElementById('add-product-form');
    const adminProducts = document.getElementById('admin-products');

    let products = JSON.parse(localStorage.getItem('products')) || [];

    function renderProducts() {
      if (products.length === 0) {
        adminProducts.innerHTML = '<p class="text-center text-gray-600 dark:text-gray-300">Nu există produse.</p>';
        return;
      }
      adminProducts.innerHTML = products.map((p, i) => `
        <div class="flex justify-between items-center p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md">
          <div class="flex items-center space-x-4">
            <img src="${p.image}" alt="${p.name}" class="w-24 h-24 object-cover rounded-lg">
            <div>
              <h3 class="font-bold text-lg">${p.name}</h3>
              <p class="text-yellow-500 font-semibold">${p.price.toFixed(2)} €</p>
            </div>
          </div>
          <div class="space-x-2">
            <button class="edit-btn px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-400 transition" data-id="${i}">Edit</button>
            <button class="delete-btn px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-400 transition" data-id="${i}">Șterge</button>
          </div>
        </div>
      `).join('');

      // Event Delete
      document.querySelectorAll('.delete-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const id = parseInt(btn.dataset.id);
          products.splice(id, 1);
          localStorage.setItem('products', JSON.stringify(products));
          renderProducts();
        });
      });

      // Event Edit
      document.querySelectorAll('.edit-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const id = parseInt(btn.dataset.id);
          const newName = prompt("Nume nou:", products[id].name);
          if (newName) products[id].name = newName;
          const newPrice = parseFloat(prompt("Preț nou (€):", products[id].price));
          if (!isNaN(newPrice)) products[id].price = newPrice;
          const newImage = prompt("URL imagine nouă:", products[id].image);
          if (newImage) products[id].image = newImage;
          localStorage.setItem('products', JSON.stringify(products));
          renderProducts();
        });
      });
    }

    addForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const name = document.getElementById('product-name').value.trim();
      const price = parseFloat(document.getElementById('product-price').value);
      const image = document.getElementById('product-image').value.trim();

      if (!name || !image || isNaN(price)) {
        alert("Completează toate câmpurile corect!");
        return;
      }

      products.push({name, price, image, id: Date.now()});
      localStorage.setItem('products', JSON.stringify(products));
      addForm.reset();
      renderProducts();
    });

    renderProducts();

    // Logout admin
    document.getElementById('admin-logout').addEventListener('click', () => {
      localStorage.removeItem('isAdmin');
      alert("Ai fost delogat!");
      window.location.href = 'admin-login.html';
    });
  </script>
</body>
</html>
