<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Administrare comenzi</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">

  <!-- Header -->
  <header class="bg-gradient-to-r from-gray-800 to-gray-900 shadow-lg">
    <div class="max-w-7xl mx-auto flex justify-between items-center p-4">
      <a href="index.html" class="text-2xl font-bold text-white">Tehnica IT - Admin</a>
      <a href="index.html" class="text-white hover:text-yellow-400 font-semibold">Înapoi la magazin</a>
    </div>
  </header>

  <!-- Conținut -->
  <main class="max-w-6xl mx-auto py-10 px-4">
    <h1 class="text-4xl font-extrabold text-gray-900 mb-10 text-center">Comenzi plasate</h1>

    <div id="orders-list" class="space-y-6">
      <p class="text-gray-600">Se încarcă comenzile...</p>
    </div>
  </main>

  <script>
    function loadOrders(){
      let orders = JSON.parse(localStorage.getItem("orders")) || [];
      let container = document.getElementById("orders-list");

      if(orders.length === 0){
        container.innerHTML = "<p class='text-center text-gray-600'>Nu există comenzi plasate încă.</p>";
        return;
      }

      let html = "";
      orders.forEach((order, index) => {
        let itemsHtml = order.produse.map(p => `
          <div class="flex justify-between text-sm">
            <span>${p.name} (x${p.quantity})</span>
            <span>${p.price * p.quantity} MDL</span>
          </div>
        `).join("");

        html += `
          <div class="bg-white shadow-lg rounded-2xl p-6 border-l-4 border-blue-500 relative">
            <h2 class="text-xl font-bold text-gray-800 mb-2">Comanda #${index+1}</h2>
            <p><span class="font-semibold">Client:</span> ${order.client}</p>
            <p><span class="font-semibold">Telefon:</span> ${order.telefon}</p>
            <p><span class="font-semibold">Adresă:</span> ${order.adresa}</p>
            <p><span class="font-semibold">Plată:</span> ${order.plata}</p>
            <p><span class="font-semibold">Data:</span> ${order.data}</p>
            
            <div class="mt-4">
              <h3 class="font-semibold mb-2">Produse:</h3>
              ${itemsHtml}
            </div>

            <h3 class="text-lg font-bold mt-4">Total: ${order.total} MDL</h3>

            <button onclick="deleteOrder(${index})" 
              class="absolute top-4 right-4 px-4 py-2 bg-red-500 text-white text-sm rounded-lg shadow hover:bg-red-600 transition">
              Șterge comanda
            </button>
          </div>
        `;
      });

      container.innerHTML = html;
    }

    function deleteOrder(index){
      let orders = JSON.parse(localStorage.getItem("orders")) || [];
      if(confirm("Ești sigur că vrei să ștergi această comanda?")){
        orders.splice(index, 1);
        localStorage.setItem("orders", JSON.stringify(orders));
        loadOrders();
      }
    }

    document.addEventListener("DOMContentLoaded", loadOrders);
  </script>

</body>
</html>
